pipeline {

  agent any

  stages {

    stage('Build & Test Backend') {

      steps {

        dir('backend') {

          sh 'npm install'

          sh 'npm test'

        }

      }

    }

    stage('Build & Test Frontend') {

      steps {

        dir('frontend') {

          sh 'npm install'

          sh 'npm test -- --watchAll=false'

          sh 'npm run build'

        }

      }

    }

    stage('Deploy') {

      steps {

        echo "Deploy step here (Netlify, Render, etc.)"

      }

    }

  }

}